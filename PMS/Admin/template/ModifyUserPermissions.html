<div class="" data-ng-controller="ControllerModifyPermissions">
     <div class="panel panel-info" style="margin-bottom: 2px; height:564px;">
    <div class="panel-heading fFamily2" style="font-size:17px" >Modify User Permissions
        <button type="button" style="float:right;margin-top:-4px; "  class="btn btn-info btn-md" data-toggle="modal" data-target="#UserPermissionModal">Modify Permissions</button>

    </div>
    <div class="panel-body">
<div class="row" style="margin-top: 3px; margin-bottom: 2px;">
    <div class="col-lg-4">
    <div class="col-md-4">Select Role</div>
    <div class="col-md-6">
        <select id="RoleDropDownForFilter" data-ng-model="SelectedRoleForFilter" data-ng-options="RoleName for RoleName in models.RoleNameList" class="form-control" data-ng-change="methods.filterUserPermissionTable();">
                                 <option value="" selected="" class="ng-binding" data-ng-click="methods.filterUserPermissionTable();">Please select</option>                               
        </select>
    </div>
    </div>
    <div class="col-lg-6">
    <div class="col-md-2" ></div>
    <div class="col-md-3" >Select User</div>
    <div class="col-md-4">
         <select id="UserDropDownForFilter" data-ng-model="SelectedUserNameForFilter" data-ng-options="User.UserName for User in models.UsersList" class="form-control" data-ng-change="methods.filterUserPermissionTable();">
           <option value="" selected="" class="ng-binding" data-ng-click="methods.filterUserPermissionTable();">Please select</option>                               
         </select>
    </div>
    </div>
      <div class="col-md-2" style="text-align:right;margin-bottom:4px;">
     </div>
</div>


<table id="table_id3" class="table table-striped"  ng-table="models.usersTable" show-filter="true">
        <thead>
            <tr>
            
                <th>User Name</th>
                <th>Role Name</th>
                <th>
                     ProgramName
                         <i ><a href="" ng-click="sort('ProgramName')" class="sortDir" ng-class="{ active: isSorted('ProgramName') }">&#x25B2;</a></i>
                         <i ><a href="" ng-click="sort('-ProgramName')" class="sortDir" ng-class="{ active: isSorted('-ProgramName' ) }">&#x25BC;</a></i>
                </th>
                <th>
                    ProjectName
                     <i ><a href="" ng-click="sort('ProjectName')" class="sortDir" ng-class="{ active: isSorted('ProjectName') }">&#x25B2;</a></i>
                     <i ><a href="" ng-click="sort('-ProjectName')" class="sortDir" ng-class="{ active: isSorted('-ProjectName' ) }">&#x25BC;</a></i>
                       
                </th>
                <th>Edit Permission</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
            <tr>
                <th></th><th></th>
                 <th><input type="text" class="form-control" placeholder=" Program Name" ng-model="filterProgram"></th>
                 <th><input type="text" class="form-control" placeholder=" Project Name" ng-model="filterProject"></th>
            </tr>
        </thead>
        <tbody>
    
            <tr data-ng-repeat="usr in data | filter:{ProgramName:filterProgram} | filter:{ProjectName:filterProject}   | orderBy:predicate:reverse  ">
                <td  >{{ usr.UserName}}</td>
                <td  >{{usr.RoleName}}</td>
                <!--<td data-title="'Program Name'"  sortable="'ProgramName'" filter="{ 'ProgramName': 'text' }">{{usr.ProgramName}}</td> "       -->
                <!--<td data-title="'Project Name'"  sortable="'ProjectName'" filter="{ 'ProjectName': 'text' }">{{usr.ProjectName}}</td>-->
                <td >{{usr.ProgramName}}</td>
                <td>{{usr.ProjectName}}</td>
                
                <td >{{usr.EditPermission}}</td>
                <td  > <a href="javascript:void(0)" data-ng-click="methods.EditUserPermission(usr.UserName,usr.ProgramName,usr.ProjectName);"><i class="glyphicon glyphicon-edit"> </i>  </a></td>
                <td  > <a href="javascript:void(0)" data-ng-click="HelperMethods.GetResponseForDelete(usr.UserName,usr.PID,usr.ParentID);"><i class="glyphicon glyphicon-trash"> </i></a></td>
            </tr>
            <tr >
                <td colspan="4" data-ng-show="!models.ListData.length">No Data Available !!</td>
            </tr>
        </tbody>
    </table>


   <!--Start : Modal-->
<!-- Trigger the modal with a button -->
<!-- Modal -->
<div id="UserPermissionModal" class="modal fade" role="form">
    <div class="modal-dialog" style="width: 700px; ">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close btn btn-md" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Modify User Permissions</h4>
            </div>
            <div class="modal-body" >

                <div class="row"  >
                  
                    <div class="col-md-3">Select Role</div><div class="col-md-3"><select id="ModifyRoleDropDown" data-ng-model="SelectedRoleForPermission" data-ng-options="RoleName for RoleName in models.RoleNameList" class="form-control" data-ng-change="HelperMethods.FillResourceDropDown();">
                                 <option value="" disabled="" selected="" class="ng-binding">Please select</option>                               
                            </select>
                                                           </div>
                   
                    <div class="col-md-3" >Select User</div><div class="col-md-3">
                                                               <select id="ModifyUserDropDown" data-ng-model="SelectedUserNameForPermission" data-ng-options="item.UserName as item.UserName for item in models.UsersForRoleList" class="form-control" data-ng-change="methods.checkProgramOrProject();">
                                 <option value="" disabled="" selected="" class="ng-binding">Please select</option>                               
                            </select>
                  
                                                           </div>
                    <div ng-if="SelectedRoleForPermission==='Project Manager'&&SelectedUserNameForPermission">
                        <div class="row">
                            <div class="col-md-12" style="margin-top: 10px;">
                            <!--<div class="col-md-2"></div>-->
                            <div class="col-md-3" >Select Program</div>
                            <!--<div class="col-md-1"></div>-->
                            <div class="col-md-3">
                                
                                 <select id="ProgramList" data-ng-model="models.ProgramForProjectManager" data-ng-options="item for item in models.ProgramList" class="form-control" data-ng-change="HelperMethods.FillPermissionGridProjectLevel();">
                                 <option value="" disabled="" selected="" class="ng-binding">Please select</option>                               
                                 </select>
                            </div>
                           
                            </div>
                        </div>
                   </div>
                    
                  </div>
                  </div>
            <!--for Program Manager-->

            <div class="modal-body" ng-if="SelectedRoleForPermission==='Program Manager'&&SelectedUserNameForPermission">
               
                <!--{{models.UsersPermissionForRoleList.length}}-->
                 <div ng-if="models.UsersPermissionForRoleList" class="row" >
                     <!--<div class="col-lg-3"></div>-->
                     <div class="col-lg-12">
                    <table>
                        <thead>
                            <tr>
                                <td class="col-md-2"><b>Program Name</b></td>
                                <td class="col-md-2"></td>
                                <td class="col-md-2"><b>View</b></td>
                                <td class="col-md-2"></td>
                                <td class="col-md-2"><b>Edit</b></td>

                            </tr>
                            <tr><td class="col-md-2"></td></tr>
                        </thead>

                        <tbody >
                            <tr data-ng-repeat="program in models.UsersPermissionForRoleList">

                                <td class="col-md-1" style="display:none;">{{ program.Id}}</td>
                                <td class="col-md-6">{{ program.ProgramName}}</td>
                                <td class="col-md-1" style="display:none;">{{ program.PID}}</td>
                                <td class="col-md-2"></td>
                                <td class="col-md-2"><input type="checkbox" data-ng-model="program.ViewPermission" value="{{ program.ProgramName}}"  > </td>
                                <td class="col-md-2"></td>
                                <td class="col-md-2"><input type="checkbox" data-ng-model="program.EditPermission" value="{{ program.ProgramName}}" ></td>
                            </tr>
                        </tbody>
                    </table>
                   </div>
                     <div class="col-lg-3"></div>

                </div>
                </div>
                <div class="modal-body" ng-if="models.ProgramForProjectManager && SelectedRoleForPermission==='Project Manager'">
                     <!--{{models.UsersPermissionForRoleList.length}}-->
                 <div ng-if="models.UsersPermissionForRoleList" class="row">
                      <!--<div class="col-lg-3"></div>-->
                     <div class="col-lg-12">
                    <table>
                        <thead>
                            <tr>
                                <td class="col-md-2"><b>Project Name</b></td>
                                <td class="col-md-2"></td>
                                <td class="col-md-2"><b>View</b></td>
                                <td class="col-md-2"></td>
                                <td class="col-md-2"><b>Edit</b></td>
                            </tr>
                        </thead>

                        <tbody>
                            <tr data-ng-repeat="program in models.UsersPermissionForRoleList">
                                <td class="col-md-1" style="display:none;">{{ program.Id}}</td>
                                <td class="col-md-6">{{ program.ProgramName}}</td>
                                <td class="col-md-1" style="display:none;" >{{ program.PID}}</td>
                                <td class="col-md-2"></td>
                                <td class="col-md-2"><input type="checkbox" data-ng-model="program.ViewPermission" value="{{ program.ProgramName}}" ></td>
                                <td class="col-md-2"></td>
                                <td class="col-md-2"><input type="checkbox" data-ng-model="program.EditPermission" value="{{ program.ProgramName}}" ></td>
                            </tr>
                        </tbody>
                    </table>
                   </div>
                   <div class="col-lg-3"></div>
                </div>
                     
                  </div>


          
                <!-- <div class="row" style="margin-bottom:10px;">
                    <div class="col-md-8" style="text-align:left;"></div>
               </div>-->

            <div>
                <div class="row"></div>
            </div>
          
            <div class="modal-footer">
                <button style="display:none"  type="button" class="btn btn-default btn-md" data-dismiss="modal">Close</button>
                <div class="col-md-4" style="float: right;"><button type="button" class="btn btn-default btn-md" ng-click="methods.AssignPermissions(models.UsersPermissionForRoleList)">{{models.btnAddlable}}</button> </div>

            </div>
        </div>

    </div>
</div>
<!--End : Modal-->



</div></div></div>